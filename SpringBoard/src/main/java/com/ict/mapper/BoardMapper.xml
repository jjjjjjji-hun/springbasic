<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http:/mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 위의 스키마 작성 후, 어떤 인터페이스의 메서드를 쿼리문과
	연결해 줄지 아래와 같이 인터페이스 파일부터 mapper태그로 연결합니다. -->
<mapper namespace="com.ict.mapper.BoardMapper">

	<select id="getList" resultType="com.ict.domain.BoardVO">
		<!-- <이나 >과 같이 태그로 오인될 수 있는 문자를 포함하는 쿼리문은
		그냥 작성하지 않고, CDATA를 이용합니다. 아래와 같이
		<![CDATA[ 실행문 ]]> 과 같이 실행문을 CDATA내부에 작성하면 
		내부의 부등호는 전부 문자로 간주됩니다. -->
		<!-- <![CDATA[SELECT * FROM board_tbl]]> -->
		<![CDATA[
			SELECT * FROM
				(SELECT /*+ INDEX_DESC(board_tbl pk_board) */
				rownum rn, board_tbl.* FROM board_tbl WHERE rownum <= (#{pageNum}*10))
					WHERE rn > ((#{pageNum}-1)*10)
		]]>
	</select>
	
	<!-- 현재 insert는 BoardVO를 파라미터로 받고 있습니다.
	이 경우, VO 내부 변수를 #{변수명}으로 쿼리문에 전달할 수 있습니다.
	${변수명} 이 아님에 주의해주세요. insert 구문이므로 insert태그를 쓰고 리턴자료가 없으니 resultType 작성 안합니다.
	BoardVO를 받지만 #{vo.변수명}이라고 적지 않습니다. -->
	<insert id="insert">
		INSERT INTO board_tbl(bno, title, content, writer) VALUES (board_num.nextval, #{title}, #{content}, #{writer})
	</insert>
	
	<!-- where 조건식을 걸어 하나의 게시글만 조회하는 select 경우도 resultType을 보면 리스트와 똑같이 BoardVO를 넣어줌 -->
	<select id="select" resultType="com.ict.domain.BoardVO">
		SELECT * FROM board_tbl WHERE bno = #{bno}
	</select>
	
	<!-- where 조건식을 걸어 하나의 게시글만 삭제하는 delete 구문은 리턴자료가 없으므로 resultType 작성 안함. -->
	<delete id="delete">
		 DELETE FROM board_tbl WHERE bno = #{bno}
	</delete>
	
	<!-- where 조건식을 걸어 하나의 게시글만 수정하는 update 구문은 리턴자료가 없습니다. -->
	<update id="update">
		UPDATE board_tbl SET title = #{title}, content = #{content}, updatedate = SYSDATE WHERE bno = #{bno}
	</update>
	
	
	<update id="update2">
		UPDATE board_tbl SET title = #{title}, content = #{content}, updatedate = SYSDATE WHERE bno = #{bno}
	</update>
</mapper>